import"./assets/support-f983e274.js";import{a as h}from"./assets/vendor-26fe51b3.js";const k="https://books-backend.p.goit.global/";function y(e){if(!e.data)throw new Error("Invalid response format");return e.data}function f(e){throw e.response?new Error(`Request failed with status ${e.response.status}`):e.request?new Error("No response received from the server"):new Error(`Error setting up the request: ${e.message}`)}async function $(){try{const e=await h.get(`${k}books/category-list`);return y(e)}catch(e){f(e)}}async function C(){try{const e=await h.get(`${k}books/top-books`);return y(e)}catch(e){f(e)}}async function E(e){try{const t=await h.get(`${k}books/category?category=${e}`);return y(t)}catch(t){f(t)}}const L=document.querySelector(".all-categories"),T=document.querySelector(".book-category-list"),p=document.querySelector(".Books-best-sellers-text"),i=document.querySelector(".active-all-categories");i.classList.remove("inactive-all-categories");$().then(e=>{e.sort((t,s)=>t.list_name>s.list_name?1:-1).map(t=>{const{list_name:s}=t;return L.insertAdjacentHTML("beforeend",`<li><a class="list-category"href="">${s}</a></li>`)}).join("")}).catch(e=>console.log(e));L.addEventListener("click",x);function x(e){e.preventDefault(),console.log(e.target.textContent);const t=e.target.textContent;if(t==="All categories"){i.classList.remove("inactive-all-categories"),i.classList.add("active-all-categories"),p.innerHTML="Best Sellers";const s=" Books";let a=document.createElement("span");a.classList.add("Books-best-sellers-text-span"),a.textContent=s,p.appendChild(a),C().then(n=>{const o=document.querySelector(".book-category-list");n.forEach(l=>{const c=document.createElement("h3");c.textContent=`${l.list_name}`.toUpperCase(),c.className="bs-h3";const r=document.createElement("ul");r.className="bs-book-list",l.books.forEach(m=>{const b=document.createElement("li");b.className="bs-book-item",b.innerHTML=`
          <img class="bs-book-image" src="${m.book_image}" alt="${m.title}"" />
          <p class="title-book">${m.title}</p>
          <p class="author-book">${m.author}</p>
        `,r.appendChild(b)}),o.appendChild(c),o.appendChild(r);const d=document.createElement("button");d.type="button",d.classList.add("bs-buttom");const u=document.createElement("span");u.textContent="See More",u.classList.add("bs-buttom-name"),d.appendChild(u),o.appendChild(d)})}).catch(n=>console.error("Error fetching data:",n))}else{i.classList.remove("active-all-categories"),i.classList.add("inactive-all-categories");const a=t.split(" ").slice(0,-1),n=t.split(" ").pop();p.innerHTML=a.join(" ");let o=document.createElement("span");o.classList.add("Books-best-sellers-text-span"),o.textContent=` ${n}`,p.appendChild(o)}t&&E(t).then(s=>{const a=s.map(({book_image:n,title:o,author:l,_id:c})=>`<li id="${c}" class="bs-book-item">
      <img class="bs-book-image" src="${n}" alt="${o}" />
      <p class="title-book">${o}</p>
      <p class="author-book">${l}</p>
    </li>`).join("");return T.innerHTML=a}).catch(s=>console.log(s))}const v=document.querySelector(".book-category-list"),w=document.querySelector(".Books-best-sellers-text"),g=document.querySelector(".scroll-btn");function M(e){E(e).then(t=>{console.log(t);const s=t.map(({book_image:a,title:n,author:o,_id:l})=>`
          <li class="bs-book-item-fil">
            <img src="${a}" alt="${n}" class="bs-book-image" />
            <p class="title-book">${n}</p>
            <p class="author-book">${o}</p>
          </li>`).join("");v.innerHTML=`<ul class="bs-book-list-fil">${s}</ul>`}).catch(t=>console.error("Error fetching data:",t))}document.addEventListener("DOMContentLoaded",()=>{C().then(e=>{const t=document.querySelector(".book-category-list");e.forEach(s=>{const a=document.createElement("h3");a.textContent=`${s.list_name}`.toUpperCase(),a.className="bs-h3";const n=document.createElement("ul");n.className="bs-book-list",s.books.forEach(c=>{const r=document.createElement("li");r.className="bs-book-item",r.innerHTML=`
            <img class="bs-book-image" src="${c.book_image}" alt="${c.title}" />
            <p class="title-book">${c.title}</p>
            <p class="author-book">${c.author}</p>
          `,n.appendChild(r)}),t.appendChild(a),t.appendChild(n);const o=document.createElement("button");o.type="button",o.classList.add("bs-buttom");const l=document.createElement("span");l.textContent="See More",l.classList.add("bs-buttom-name"),o.appendChild(l),t.appendChild(o),o.addEventListener("click",function(){M(s.list_name),w.textContent=s.list_name})})}).catch(e=>console.error("Error fetching data:",e)),g.addEventListener("click",function(){S()})});function S(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.onscroll=function(){q()};function q(){document.body.scrollTop>100||document.documentElement.scrollTop>100?g.style.display="block":g.style.display="none"}
//# sourceMappingURL=commonHelpers.js.map
